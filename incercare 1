include 'emu8086.inc'  

start:  
;PTHIS este functia care printeaza pe ecran
;scan_num este functia care ia de la tastatura valoarea
    call PTHIS   
        DB 13,10, 'Alegeti forma geometrica: ', 0   
    putc 13
    call PTHIS
        DB 13,10, '1. Cub',0
    putc 13
    call PTHIS
        DB 13,10, 'Optiune: ', 0
    call scan_num


    cmp cx, 1
    je cub
 

;programul de desen al cubului
;permite desenarea inclusiv a liniilor care nu se vad (pe acestea le face punctat)
cub: 
    putc 13
    call PTHIS
        DB 13,10, 'Introduceti lungimea laturii: ',0 ;se alege valoarea lui l
    call scan_num   
    
    l dw ?  
    h dw ? 
    
    mov l,cx          ;valoarea data de la tastatura este memorata in l
    mov ax, l
    mov dl, 2
    div dl
    mov ah, 0
    mov h, ax         ;h se ia din ax

    code: mov ah, 0
          mov al, 12h ; trecere in mod grafic 720x400
          int 10h   
 
 ; afisare latura superioara
          mov cx, 100
          add cx, l   ;adunam pentru a desena pe l coloane pornind din pozitia 100
          mov dx, 100 ;rand
          mov al, 7   ;gri
      u1: mov ah, 0ch ; afisare pixel 
          int 10h
          dec cx   ;decrementam cx, pentru a parcurge coloanele si a colora pixelii         
          cmp cx, 100 ;se compara cx cu 100 care este coloana de orpire a liniei
          jae u1         
          
 ; afisare latura inferioare
          mov cx, 100
          add cx, l  ;adunam l pentru a desena pe l coloane pornind din pozitia 100
          mov dx, 100
          add dx, l  ;adunam l la valoarea randului pentru a cobora punctul de inceput al desenului
          mov al, 9  ;
      u2: mov ah, 0ch;afisare pixel
          int 10h
          dec cx     ;decrementare cx, pentru parcurgere coloana
          cmp cx, 100;comparare cu 100 pentru a stabili cand se termina linia
          ja u2   
          
 ; latura din stanga
          mov cx, 100 ;desenam pe o singura coloana
          mov dx, 100 ;parcurgem pe randuri pixelii
          add dx, l   ;pentru asta adunam valoarea data de noi de la tastatura la pozitia de inceput
          mov al, 5   ;roz  
      u3: mov ah, 0ch ;afisare pixel
          int 10h
          dec dx      ;se decrementeaza dx-ul pentru a parcurge toate randurile
          cmp dx, 100 ;se compara cu 100,care este pozitia de stop
          ja u3    
          
 ; latura din dreapta
          mov cx, 100;desenam pe o singura coloana
          add cx, l  ;dar mutam coloana la dreapta cu l pentru a inchide patratul
          mov dx, 100;parcurgerea liniei se face pe randuri
          add dx, l  ;adunam l pentru a desena pe l randuri pornind din pozitia 100
          mov al, 10 ;verde deschis
      u4: mov ah, 0ch;afisare pixel
          int 10h
          dec dx     ;decrementarea dx-ului pentru a parcurge toate randurile 
          cmp dx, 100;se compara cu 100, care este pozitia de stop
          ja u4
 
; latura spate-sus-stanga
          mov cx, 100
          mov dx, 100
          mov bx, 100
          add bx, h  ;pentru a gasi punctul de oprire al liniei
          mov al, 15
      u5: mov ah, 0ch;afisare pixel
          int 10h
          dec dx     ;
          inc cx     ;incrementare cx pentru a se muta pe coloane
          cmp cx, bx ;compara pana gaseste punctul de stop
          jl u5
 
; latura sus dreapta
mov cx, 100
add cx, l
mov dx, 100 
mov bx, cx
add bx, h
mov al, 15
u6: mov ah, 0ch
int 10h
inc cx
dec dx
cmp cx, bx
jl u6

; latura sus 
mov cx ,100
add cx, h
mov dx, 100
sub dx, h
mov bx , cx
add bx, l
mov al, 15
u7: mov ah, 0ch
int 10h
inc cx
cmp cx, bx
jl u7  

;latura
mov cx ,100
add cx, l
mov dx, 100
add dx, l 
mov bx, cx
add bx, h
mov al, 15
u8: mov ah, 0ch
int 10h
dec dx
inc cx
cmp cx, bx
jl u8

;lat2
mov cx ,100
add cx, l
add cx, h
mov dx, 100
sub dx, h
mov bx, 100
add bx, h
mov al, 15
u9: mov ah, 0ch
int 10h
inc dx
cmp dx, bx
jl u9   

;lat pct 1 
mov cx,100
mov dx,100
add dx,l
mov bx,100
add bx,h
mov al,15
u10:mov ah,0ch
int 10h
dec dx
inc cx
dec dx
inc cx
dec dx
inc cx
dec dx
inc cx
dec dx
inc cx
cmp cx,bx 
jl u10 

;lat pct 2
mov cx,100
add cx,l
add cx,h
mov dx,100
add dx,h
mov bx,cx
sub bx,l
mov al,15
u11:mov ah,0ch
int 10h
dec cx
dec cx
dec cx
dec cx
dec cx
cmp cx,bx
ja u11

;lat pct 3
mov cx ,100
add cx,h
mov dx,100
add dx,h 
mov bx,100
sub bx,h
mov al,15
u12:mov ah,0ch
int 10h
dec dx
dec dx
dec dx
dec dx
dec dx
cmp dx,bx
ja u12
  

;alerta 
mov ah, 02
mov dx, 07h
int 21h                   
mov ah, 02
mov dx, 07h
int 21h
mov ah, 02
mov dx, 07h
int 21h

jmp final

 
 final:
 ; asteptare apasare tasta
 mov ah, 00
 int 16h
 mov ah,00h 
 int 10h

  
jmp start

HLT
DEFINE_SCAN_NUM
DEFINE_PRINT_NUM
DEFINE_PRINT_NUM_UNS
DEFINE_PTHIS
